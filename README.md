# Telegram Бот для бронирования туров

Полнофункциональный бот для бронирования туров с пошаговым процессом, приемом чеков и админ-панелью.

## Возможности

- ✅ Пошаговое бронирование туров
- ✅ Выбор направления, типа тура и даты
- ✅ Автоматический расчет цены
- ✅ Прием чеков об оплате (фото/PDF)
- ✅ Админ-панель для подтверждения оплат
- ✅ Хранение всех бронирований в JSON файле
- ✅ Кнопка "Назад" на каждом этапе
- ✅ Отмена бронирования в любой момент

## Установка

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Получите токен бота:
   - Найдите **@BotFather** в Telegram
   - Отправьте команду `/newbot`
   - Следуйте инструкциям и получите токен

3. Получите свой Telegram ID:
   - Найдите **@userinfobot** в Telegram
   - Отправьте любое сообщение
   - Скопируйте ваш ID

4. Настройте бота:
   - Откройте файл `bot.py`
   - Замените `ВАШ_ТОКЕН_БОТА` на строке 25 на ваш токен
   - Замените `ВАШ_ТЕЛЕГРАМ_ID` на строке 28 на ваш ID
   - При необходимости измените номера телефонов для оплаты (строки 31-32)

## Запуск

```bash
python bot.py
```

## Использование

### Для пользователей:

1. Отправьте `/start` боту
2. Выберите направление тура
3. Выберите тип тура
4. Выберите дату
5. Подтвердите бронирование
6. Оплатите и отправьте чек (фото или PDF)
7. Дождитесь подтверждения от администратора

### Для администратора:

- `/list` или `/bookings` - список всех бронирований
- `/confirm <user_id>` - подтвердить оплату пользователя

## Настройка направлений и дат

Вы можете изменить:
- **Направления туров** - в словаре `DIRECTIONS` (строка 38)
- **Типы туров и цены** - в словаре `TOUR_TYPES` (строка 45)
- **Свободные даты** - в списке `AVAILABLE_DATES` (строка 52)

## Структура данных

Все бронирования сохраняются в файле `bookings.json` в формате:
```json
{
  "user_id": {
    "direction": "charyn",
    "direction_name": "Чарынский каньон",
    "tour_type": "interactive",
    "tour_type_name": "Интерактивный тур",
    "date": "12 января",
    "price": 60000,
    "status": "confirmed",
    "created_at": "2024-01-10T12:00:00",
    "receipt_received": true,
    "receipt_file_id": "...",
    "confirmed_at": "2024-01-10T12:30:00"
  }
}
```

## Статусы бронирований

- `waiting_payment` - ожидает оплаты
- `waiting_admin_confirmation` - чек получен, ожидает подтверждения
- `confirmed` - оплата подтверждена, тур забронирован

## Дополнительные возможности

Бот готов к расширению:
- Добавление напоминаний о неотправленных чеках
- Интеграция с платежными системами
- Уведомления за день до тура
- Статистика и аналитика
